<!DOCTYPE html>
<html lang="z-ch">
<head>
    <title>首页</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="keywords"
          content="HTML, CSS, JS, JavaScript, framework, bootstrap, front-end, frontend, web development">
    <meta name="author" content="设计：王齐 <wangqi@bootcss.com>">
    <link href="../bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="../bootstrap/css/bootstrap-theme.min.css" rel="stylesheet"/>
    <script src="../js/jquery-3.2.1.min.js" type="text/javascript"></script>
    <script src="../layer/layer.js" type="text/javascript"></script>
    <script src="../niceValidator/dist/jquery.validator.min.js?local=zh-CN" type="text/javascript"></script>
    <script src="../bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
    <script src="../js/vue.js" type="text/javascript"></script>
</head>
<body style="background:url(/images/main.jpg) no-repeat center center;background-size: cover">
<div class="container-fluid"
     style="background:url(/images/login.jpg) no-repeat center center;width: 856px;margin-top: 20px">
    <div class="panel panel-default" style="width: 40%;margin: 100px 420px;background: rgba(0 ,0 ,0 ,0.3)">
        <div class="panel-heading" style="background: rgba(0 ,0 ,0 ,0.3);color:#FFFFFF;">
            <h3 class="panel-title">用户登录</h3>
        </div>
        <div class="panel-body">
            <form method="post" class="form-horizontal" style="margin: 0 auto;" action="/login/userLogin" data-validator-option="{timely:2, theme:'yellow_right'}">
                <div class="form-group">
                    <div class="input-group" style="width: 90%;margin: 0 auto;">
                        <span style="background: rgba(0 ,0 ,0 ,0.3);color:#FFFFFF;" class="input-group-addon"><span class="glyphicon glyphicon-user" aria-hidden="true" style="border-right: 0"></span></span>
                        <input style="background: rgba(0 ,0 ,0 ,0.3);color:#FFFFFF;border-left: 0" type="text" class="form-control" id="username" name="username" placeholder="请输入用户名"/>
                    </div>
                </div>
                <div class="form-group">
                    <div class="input-group" style="width: 90%;margin: 0 auto;">
                        <span style="background: rgba(0 ,0 ,0 ,0.3);color:#FFFFFF;" class="input-group-addon"><span class="glyphicon glyphicon-lock" aria-hidden="true" style="border-right: 0"></span></span>
                        <input style="background: rgba(0 ,0 ,0 ,0.3);color:#FFFFFF;border-left: 0" type="password" class="form-control" id="password" name="password" placeholder="请输入密码"/>
                    </div>
                </div>
                <div class="form-group">
                    <div class="input-group" style="width: 90%;margin: 0 auto;">
                        <span style="background: rgba(0 ,0 ,0 ,0.3);color:#FFFFFF;" class="input-group-addon"><span class="glyphicon glyphicon-picture" aria-hidden="true" style="border-right: 0"></span></span>
                        <input style="background: rgba(0 ,0 ,0 ,0.3);color:#FFFFFF;width:50%;border-left: 0;border-right:0" type="text" class="form-control" id="validCode" name="validCode" placeholder="请输入验证码"/>
                        <img style="background: rgba(0 ,0 ,0 ,0.3);color:#FFFFFF;width:50%;padding: 1px 1px 1px 1px" src="/login/getGhCode?v=1" class="form-control" onclick="this.src='/login/getGhCode?v='+ new Date().getTime()" alt="登陆验证码" />
                    </div>
                </div>
                <div class="form-group">
                    <div style="width: 90%;margin: 0 auto;">
                        <button type="submit" class="btn btn-default col-xs-12">登陆</button>
                    </div>
                </div>
                <div class="form-group">
                    <div style="width: 90%;margin: 0 auto;">
                        <button type="reset" class="btn btn-warning col-xs-12">重置</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div align="center" style="color:#FFFFFF">
        Copyright&copy;study platform by wangqi of sunules@qq.com created in 2018
    </div>
</div>
</body>
<script>
    $("form").validator({
        fields: {
            username: "required; length(6~20)",
            validCode: "required; length(4)",
            password: "required; length(6~20)"
        },
        valid: function(form) {
            // form.submit();
            var formData = decodeURIComponent($("form").serialize(),true);
            console.log(formData);
            $.post(
                "/login/userLogin",
                formData,
                function(result){
                    if(result.status == 'success'){
                        layer.msg('登录成功！正在进入...', {
                            icon: 16
                            ,shade: 0.01,
                            time:2000
                        },function(index){
                            layer.close(index);
                            window.location.href = "/index/goIndex";
                        });
                    }else{
                        layer.alert(result.desc,{icon:2});
                    }
                }
            );
        }
    });
</script>
</html>